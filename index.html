<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TrustCard Test</title>
  <link rel="stylesheet" href="./src/styles.css" />
  <meta name="color-scheme" content="dark light" />

  <!-- Preload core assets for faster first paint -->
  <link rel="preload" href="./public/assets/catalog/background/common/common4.svg" as="image">
  <link rel="preload" href="./public/assets/catalog/face/erudit/common.svg" as="image">
  <link rel="preload" href="./public/assets/catalog/watermark/erudit/common.svg" as="image">
  <link rel="preload" href="./public/assets/catalog/frame/erudit/common.svg" as="image">

  <link rel="dns-prefetch" href="//fonts.googleapis.com">
</head>
<body>
  <header class="topbar">
    <div class="left"><h1>TRUST CARD TEST</h1></div>

    <!-- Generator button -->
    <div class="toolbar">
      <button id="openGenerator" class="btn">Generate</button>
    </div>

    <details class="importer" id="importer">
      <summary class="btn">Importâ€¦</summary>
      <div class="import-grid">
        <label class="btn file-btn">Background
          <input id="bgInput" type="file" accept="image/*" hidden />
        </label>
        <label class="btn file-btn">Face
          <input id="faceInput" type="file" accept="image/*" hidden />
        </label>
        <label class="btn file-btn">Watermark
          <input id="wmInput" type="file" accept="image/*" hidden />
        </label>
        <label class="btn file-btn">Watermark 2
          <input id="wm2Input" type="file" accept="image/*" hidden />
        </label>
        <label class="btn file-btn">Frame
          <input id="frameInput" type="file" accept="image/*" hidden />
        </label>
        <label class="btn file-btn">Avatar
          <input id="avatarInput" type="file" accept="image/*" hidden />
        </label>
      </div>
    </details>
  </header>

  <main class="layout">
    <!-- Thumbnails -->
    <aside class="left-rail" aria-label="Thumbnails">
      <div class="thumbs-header">
        <button class="apply" id="closeLeftRail" aria-label="Close thumbnails">Close</button>
      </div>
      <div class="left-rail-content" id="leftRailContent" aria-hidden="false">
        <div class="filter-buttons">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="background">BG</button>
          <button class="filter-btn" data-filter="watermark">WM</button>
          <button class="filter-btn" data-filter="face">Face</button>
          <button class="filter-btn" data-filter="frame">Frame</button>
        </div>

        <div class="rarity-buttons">
          <button class="rarity-btn active" data-rarity="all">All</button>
          <button class="rarity-btn" data-rarity="common">Common</button>
          <button class="rarity-btn" data-rarity="rare">Rare</button>
          <button class="rarity-btn" data-rarity="epic">Epic</button>
          <button class="rarity-btn" data-rarity="legendary">Legendary</button>
          <button class="rarity-btn" data-rarity="ancient">Ancient</button>
          <button class="rarity-btn" data-rarity="mystic">Mystic</button>
        </div>

        <div class="thumbs-container" id="allThumbs">
          <div class="thumb thumb-empty" data-empty title="Empty">Empty</div>
        </div>
      </div>
    </aside>

    <!-- Drop Zones -->
    <aside class="drops-rail" aria-label="Drop zones">
      <div class="panel drop-panel" id="leftDropPanel">
        <h2>Drop here</h2>
        <div class="drop-zones">
          <div class="drop-zone" data-target="bgImg"   title="Background">
            <span class="drop-zone-label">BG</span>
            <button class="drop-zone-rand" title="Random">â†»</button>
            <span class="drop-zone-clear" title="Clear">âœ•</span>
          </div>
          <div class="drop-zone" data-target="faceImg" title="Face">
            <span class="drop-zone-label">Face</span>
            <button class="drop-zone-rand" title="Random">â†»</button>
            <span class="drop-zone-clear" title="Clear">âœ•</span>
          </div>
          <div class="drop-zone" data-target="wmImg"   title="Watermark">
            <span class="drop-zone-label">WM</span>
            <button class="drop-zone-rand" title="Random">â†»</button>
            <span class="drop-zone-clear" title="Clear">âœ•</span>
          </div>
          <div class="drop-zone" data-target="wm2Img"   title="Watermark 2">
            <span class="drop-zone-label">WM2</span>
            <span class="drop-zone-clear" title="Clear">âœ•</span>
          </div>
          <div class="drop-zone" data-target="frameImg" title="Frame">
            <span class="drop-zone-label">Frame</span>
            <button class="drop-zone-rand" title="Random">â†»</button>
            <span class="drop-zone-clear" title="Clear">âœ•</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Stage -->
    <section class="stage" aria-label="Card stage">
      <div class="card" id="card" data-tilt>
        <img id="bgImg"   class="bg-img"   src="./public/assets/catalog/background/common/common4.svg" alt="background" fetchpriority="high" decoding="async" />
        <img id="faceImg" class="card-img" src="./public/assets/catalog/face/erudit/common.svg" alt="face" decoding="async" />
        <img id="wmImg"   class="wm-img"   src="./public/assets/catalog/watermark/erudit/common.svg" alt="filigrane" decoding="async" />
        <img id="wm2Img"  class="wm-img wm2-img is-empty" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAn8B9p1pOQAAAABJRU5ErkJggg==" alt="filigrane 2" loading="lazy" decoding="async" />

        <div class="glare" aria-hidden="true"></div>
        <img id="frameImg" class="frame-img" src="./public/assets/catalog/frame/erudit/common.svg" alt="frame" />

        <div class="liquid-frame">
          <div class="avatar-panel" id="avatarPanel">
            <div class="avatar-ring"></div>
            <img id="avatarImg" src="./public/assets/avatars/avatar.jpg" alt="avatar" loading="lazy" decoding="async" />
          </div>
          <div class="info-panel" id="infoPanel">
            <div class="info-grid" id="infoGrid"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Options">
      <button id="randomizeBtn" class="cta-random">
        <span class="random-icon">â†»</span> Randomize
      </button>

      <div class="panel">
        <h2>Quick Presets</h2>
        <div class="preset-buttons">
          <button class="preset-btn" data-preset="erudit" id="eruditBtn">
            <span class="preset-name">Erudit</span>
            <span class="preset-desc">Common</span>
          </button>
          <button class="preset-btn" data-preset="bee" id="beeBtn">
            <span class="preset-name">Bee</span>
            <span class="preset-desc">Common</span>
          </button>
          <button class="preset-btn" data-preset="sphere_alt" id="sphereAltBtn">
            <span class="preset-name">Sphere</span>
            <span class="preset-desc">Common</span>
          </button>
          <button class="preset-btn" data-preset="erudit2" id="erudit2Btn">
            <span class="preset-name">Erudit2</span>
            <span class="preset-desc">Common</span>
          </button>
        </div>
      </div>

      <div class="panel">
        <h2>Visibility</h2>
        <div class="visibility-grid">
          <label class="label-inline"><input type="checkbox" class="show-toggle" data-target="bg" checked /> Background</label>
          <label class="label-inline"><input type="checkbox" class="show-toggle" data-target="frame" checked /> Frame</label>
          <label class="label-inline"><input type="checkbox" class="show-toggle" data-target="face" checked /> Face</label>
          <label class="label-inline"><input type="checkbox" class="show-toggle" data-target="wm" checked /> Watermark</label>
          <label class="label-inline"><input type="checkbox" class="show-toggle" data-target="wm2" checked /> Watermark 2</label>
          <label class="label-inline"><input type="checkbox" class="show-toggle" data-target="avatar" checked /> Avatar</label>
          <label class="label-inline"><input type="checkbox" class="show-toggle" data-target="info" checked /> Info</label>
        </div>
      </div>

      <div class="panel">
        <h2>Favorite Compositions</h2>
        <div class="save-composition">
          <div class="row">
            <input type="text" id="compositionName" placeholder="Composition name..." class="input-compact" />
          </div>
          <div class="row-gap8">
            <button id="saveComposition" class="apply btn-accent flex-1">ðŸ’¾ Save</button>
          </div>
        </div>
        <div class="favorites-list" id="favoritesList"></div>
      </div>

      <div class="panel" id="personalize">
        <h2>Personalize</h2>
        <div class="fold-body">
          <div class="panel">
            <h3>Transform</h3>
            <div class="row">
              <label for="transformTarget">Target</label>
              <select id="transformTarget">
                <option value="bg">Background</option>
                <option value="face">Face</option>
                <option value="wm">Watermark</option>
                <option value="wm2">Watermark 2</option>
                <option value="frame">Frame</option>
              </select>
            </div>
            <div class="row">
              <label for="transformScale">Scale</label>
              <div class="ctrl-line">
                <input id="transformScale" type="range" min="0.1" max="10" step="0.1" value="1" class="flex-1" />
                <span id="transformScaleValue" class="range-value">1.0</span>
              </div>
            </div>
            <div class="row">
              <label for="transformOffsetX">Offset X</label>
              <div class="ctrl-line">
                <input id="transformOffsetX" type="range" min="-300" max="300" step="1" value="0" class="flex-1" />
                <span id="transformOffsetXValue" class="range-value">0</span>
              </div>
            </div>
            <div class="row">
              <label for="transformOffsetY">Offset Y</label>
              <div class="ctrl-line">
                <input id="transformOffsetY" type="range" min="-300" max="300" step="1" value="0" class="flex-1" />
                <span id="transformOffsetYValue" class="range-value">0</span>
              </div>
            </div>
            <div class="row">
              <label for="transformOpacity">Opacity</label>
              <div class="ctrl-line">
                <input id="transformOpacity" type="range" min="0" max="1" step="0.01" value="1" class="flex-1" />
                <span id="transformOpacityValue" class="range-value">1.00</span>
              </div>
            </div>
            <div class="row">
              <label for="transformBrightness">Brightness</label>
              <div class="ctrl-line">
                <input id="transformBrightness" type="range" min="0" max="2" step="0.01" value="1" class="flex-1" />
                <span id="transformBrightnessValue" class="range-value">1.00</span>
              </div>
            </div>
            <div class="row space-between">
              <button id="saveTransform" class="apply btn-accent">ðŸ’¾ Save</button>
              <button id="transformReset" class="apply">Reset</button>
            </div>
          </div>

          <div class="panel">
            <h3>Info</h3>
            <table class="composer-table" id="infoConfig">
              <thead>
                <tr>
                  <th>Label</th>
                  <th>Value</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div class="btn-row">
              <button id="addInfoRow" class="apply btn-accent">+ Add</button>
              <button id="clearInfoRows" class="apply">Clear all</button>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <noscript>Enable JavaScript to see the effects.</noscript>

  <!-- Generator Modal -->
  <div id="genModal" class="gen-modal" aria-hidden="true">
    <div class="gen-backdrop" id="genBackdrop"></div>
    <div class="gen-panel" role="dialog" aria-modal="true" aria-labelledby="genTitle">
      <header class="gen-header">
        <h2 id="genTitle">Generated Cards</h2>
        <div class="gen-actions">
          <label for="genCount" class="inline-label">
            Count
            <select id="genCount">
              <option value="100" selected>100</option>
              <option value="500">500</option>
              <option value="1000">1000</option>
            </select>
          </label>
          <span id="genStatus" class="gen-status">0/100</span>
          <button id="genReset" class="btn btn-outline">Generate</button>
          <button id="genClose" class="btn">Close</button>
        </div>
      </header>
      <div class="gen-content" id="genScrollRoot">
        <div id="genGrid" class="gen-grid"></div>
        <div id="genSentinel" class="gen-sentinel"></div>
      </div>
    </div>
  </div>

  <script src="./src/app.js" defer></script>
</body>
</html>
